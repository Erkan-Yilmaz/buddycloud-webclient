#globalHeader
  height 21px
  padding 0 13px
  linear-bg-gradient #333, #111
  color white
  text-shadow 0 1px black
  box-shadow 0 1px 2px rgba(0,0,0,.13)
  position relative
  z-index 5
  display none
  .logo
    float right
  .search
    input
      padding 2px 5px
      box-shadow 0 1px white, 0 1px rgba(0,0,0,.03) inset
      border 1px solid rgba(0,0,0,.08)
      border-radius 3px
      display none
      
#powerdby
  left 534px
  top 29px
  margin-top 2px
  width 76px
  height 26px
  text-indent -9999px
  background url(../../public/images/powerdby.png)
  position absolute

#content
  min-height 100%
  margin-left 76px
  color rgba(0,0,0,.89)
  text-shadow 0 1px rgba(255,255,255,.34)
  background #eee url("../../public/images/logo.png") no-repeat center center
  position relative
  box-shadow 0 0 8px black
  z-index 1
  &.overlapping
    min-height 100%
    position absolute
    .channelView
      height 100%
      position fixed
    .messageView
      min-height 100%
      margin-left 200px
      box-shadow 0 0 13px rgba(0, 0, 0, 0.55), 0 0 34px rgba(0, 0, 0, 0.55), 0 0 55px rgba(0, 0, 0, 0.55)
      float none
      position absolute
      z-index 4
.channelOverview #content
  margin-left 100%
.channelOverview.stateArrived #content
  height 400px // variable height to disable the vertical scrollbar
  overflow hidden // -> problem: the scroll-state will be gone -> store scroll-state

.channelView
  padding 13px
  overflow hidden
  position relative
  z-index 1
  > header
    width 500px
    height 58px
    margin-top 8px
    position relative
    h2, .mood, .location
      margin-left 8px
      width 305px
      white-space nowrap
      overflow hidden
      text-overflow ellipsis
      display block
    h2
      line-height 30px
    .mood
      font-size 12px
      color rgba(0, 0, 0, 0.55)
      clear left
    .location
      display none
      .previous
        text-decoration line-through
    nav
      right 0
      top 8px
      position absolute
      > div
        margin-left 5px
      &.inChannel
        .channel
          display none
      &.inMessages
        .messages
          display none
      .tab  
        height 29px
        padding 1px 1px 0
        margin-right -1px
        vertical-align bottom
        overflow hidden
        position relative
        display inline-block
        .holder
          padding 5px 13px 6px
          font-size 12px
          color rgba(0, 0, 0, 0.76)
          text-shadow 0 1px rgba(255, 255, 255, 0.55)
          linear-bg-gradient rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.08)
          border-radius 3px 3px 0 0
          box-shadow 0 0 0 1px rgba(0, 0, 0, 0.08), 0 0 13px rgba(0, 0, 0, 0.05)
          display block
          position relative
          cursor pointer
        &.newMessage
          .holder
            padding-right 33px
          .counter
            right 8px
            top 5px
        &.active .holder
          background white
          z-index 3
          cursor default
    + .topic
      border-radius 3px 3px 0 0
  
  
.stream  
  width 500px
  border-radius 5px
  box-shadow 0 0 0 1px rgba(0, 0, 0, 0.08), 0 0 13px rgba(0, 0, 0, 0.05)
  float left
  position relative
  z-index 2
  transform-style preserve-3d
  perspective 1000
  article
    padding 13px
    background white
    position relative
    box-shadow inset 0 -1px rgba(0,0,0,.21)
    overflow hidden
    &:first-child
      border-radius 5px 5px 0 0
    &:last-child
      border-radius 0 0 5px 5px
  .notification
    height 49px
    margin-top -76px
    color white
    text-shadow 0 1px 1px rgba(0,0,0,.34)
    border-top 1px solid rgba(0, 0, 0, 0.13)
    radial-bg-gradient cover, admin_highlight, darken(admin_highlight, 8%)
    box-shadow 0 0 1px rgba(255, 255, 255, 0.34) inset, box-shadow inset 0 -1px rgba(0,0,0,.21)
    transition 500ms 
    transform-origin bottom
    transform rotateX(70deg)
    opacity 0
    &.visible
      opacity 1
      margin-top 0
      transform rotateX(0deg)
    &.private
      &:before
        left 13px
        top 13px
        width 50px
        height 50px
        content ""
        background url("../../public/icons/padlock.png") no-repeat center
        position absolute
        opacity .55
      section
        padding-top 16px
        text-align center
    section
      padding-left 63px
    .name
      vertical-align top
      transition 500ms
    .controls
      right 13px
      top 28px
      position absolute
      > .button
        margin-left 5px
        color black
    .avatar
      width 50px
      transition 500ms
    &.log
      height 25px
      padding-top 5px
      padding-bottom 5px
      color rgba(0, 0, 0, 0.55)
      text-shadow 0 1px 1px rgba(255,255,255,.34)
      background #f2f2f2
      box-shadow 0 -1px rgba(0, 0, 0, 0.08) inset
      section
        line-height 25px
        min-height 25px
      .avatar
        left 38px
        width 25px
      p
        display none
      .name
        opacity 0
      &.granted .name,
      &.denied .name
        opacity 1
      .controls 
        display none
      &.granted .granted,
      &.denied .denied
        display inline-block
        max-width 9999px
        opacity 1
    .granted, .denied
      height 25px
      max-width 0
      line-height 25px
      overflow hidden
      opacity 0
      display none
      transition 500ms
  .opener
    min-height 50px
    padding-left 63px
  .location
    margin-left 5px
    font-size 11px
    line-height 19.5px
    color rgba(0,0,0,.34)
  .postmeta
    float right
    margin 0 0 0 13px
    text-align right
    nav
      visibility hidden
    span
      color rgba(0,0,0,.5)
      font-size 11.5px
      line-height 19.5px
      &.time
        display block
        color rgba(0,0,0,.34)
  .name
    font-weight bold
    overflow hidden
    white-space nowrap
    text-overflow ellipsis
  .opener:hover nav, .comment:hover nav
    visibility visible
  .avatar
    left 13px
    position absolute
    border-radius 3px
  section.answer
    position relative
    overflow hidden
    textarea
      margin-top 13px
      padding 4px 5px 2px
      height 18px
      width 386px
      font 12px/18px sans-serif
      border 1px solid rgba(0,0,0,.21)
      box-shadow 1px 1px white, inset 1px 1px rgba(0,0,0,0.05)
      position relative
      resize none
    .avatar
      width 26px
      left 63px
      top 18px
      opacity 0
      transition none
    .button
      margin-top -24px
      margin-bottom 1px
      float right
      transition none
      opacity 0
    &.write
      .avatar
        width 40px
        left 11px
        opacity 1
      textarea
        margin-bottom 3px
        height 37px
        resize vertical
      .button
        margin-top 0
        opacity 1
  .comments
    padding-left 13px
    .comment
      margin-top 8px
      min-height 40px
      position relative
    section
      padding-top 5px
      padding-left 63px
      &.answer:first-child
        padding-left 50px
        &.write .avatar
          left -2px
        textarea
          width 399px
    .avatar
      top 6px
      left 11px
      width 40px
      border-radius 2px
  section.newTopic
    padding 13px 13px 12px 51px
    linear-bg-gradient white, #F2F2F2
    border-bottom 1px solid rgba(0,0,0,.13)
    border-radius 5px 5px 0 0
    display block
    overflow hidden
    position relative
    z-index 1
    .avatar
      left 13px
      top 13px
      width 50px
      position absolute
      z-index 2
      transition 250ms
    textarea
      width 400px
      height 38px
      padding 5px
      margin 0
      border 1px solid rgba(0, 0, 0, 0.13)
      font 13px/19.5px sans-serif
      display block
      float right
      position relative
      z-index 2
      transition 250ms
    &.write textarea
      height 89px
      margin-bottom 29px
    .controls
      bottom 13px
      right 13px
      font-size 11px
      position absolute
      .button
        display inline-block  
  .message
    min-height 14px
    padding-left 66px
    color rgba(0,0,0,.55)
    cursor pointer
    &.new
      background-color rgba(0,0,0,.08)
    &.selected
      color darken(light_highlight, 55%)
      background light_highlight
      .location, .time
        color rgba(darken(light_highlight, 55%), 0.55)
    &:last-child
      box-shadow none
    .avatar
      width 40px
    p
      overflow hidden
      white-space nowrap
      text-overflow ellipsis
  .topic.ghost
    .name,
    .location,
    p span
      display inline-block
    .name
      height 16px
      width 89px
      background rgba(0,0,0,.21)
    .location
      width 144px
      height 14px
      background rgba(0,0,0,.08)
    .time
      width 50px
      height 16px
      background rgba(0,0,0,.08)
    .avatar
      height 50px
      width 50px
      background rgba(0,0,0,.13)
    .comments .avatar
      height 40px
      width 40px
    p span
      height 16px
      margin-right 3px
      background rgba(0,0,0,.21)
        
.conversation
  article
    min-height 40px
    padding 13px 13px 13px 64px
    box-shadow 0 -1px rgba(0, 0, 0, 0.13) inset
    position relative
    &:last-child
      border-radius 0 0 5px 5px
      box-shadow none
    .avatar
      left 13px
      width 40px
      border-radius 2px
      position absolute
    .postmeta
      margin 0
      float none
      text-align left
      .name
        color black
      .location
        margin-left 0
        display none
    p
      margin-top 2px
      margin-bottom 5px
      font-size 12px
      &:last-child
        margin-bottom 0
      .time
        float right
        color rgba(0, 0, 0, 0.34)
        font-size 11.5px
        line-height 19.5px
  .you
    background #f7f7f7

.moderationPanel
  display none
.moderate .moderationPanel
  height 28px
  width 100%
  margin 5px 0 13px
  linear-bg-gradient rgba(0,0,0,.08), rgba(0,0,0,.21)
  color black
  box-shadow 0 1px 2px rgba(0,0,0,.4) inset, 0 -1px rgba(0,0,0,.03),0 -2px rgba(0,0,0,.03), 0 -3px rgba(0,0,0,.03)
  border-radius 0 0 5px 5px
  box horizontal justify center
  > div
    padding 5px 0
    text-align center
    cursor pointer
    box-flex 1
    transition 500ms
    &:first-child
      border-bottom-left-radius 5px
    &:last-child
      border-bottom-right-radius 5px
    &:hover
      linear-bg-gradient rgba(0,0,0,.05), rgba(0,0,0,.13)

.channelDetails
  width 264px
  font-size 12px
  color rgba(0,0,0,.55)
  float left
  position relative
  .toggle
    width 220px
    height 26px
    margin-left -1px
    margin-top 13px
    padding 0 13px 0 21px
    font-weight bold
    line-height 26px
    border 1px solid rgba(0, 0, 0, 0.21)
    border-bottom-color rgba(0,0,0,.34)
    border-radius 0 14px 14px 0
    box-shadow 0 1px 0 rgba(255, 255, 255, 0.89) inset, 0 1px rgba(0,0,0,.05)
    transition 500ms
    cursor pointer
    h4
      color rgba(0,0,0,.67)
      display inline
    .icon
      margin-top 6px
      width 9px
      height 15px
      background url("../../public/icons/info.png")
      opacity 0.67
      display block
      float right
  &.hidden .toggle .icon
    opacity 0.55
  &.hidden .toggle
    margin-left -224px
  > .holder
    width 222px
    padding 8px 21px
    font-size 12px
    color rgba(0,0,0,.55)
    float left
    position relative
    transition 500ms
  &.hidden > .holder
    margin-left -252px
    opacity 0
  .meta
    table
      margin 13px 0
      th
        margin-right 2px
        padding 1px 5px
        font-size 11px
        text-align center
        background rgba(0,0,0,.05)
        &:last-child
          margin-right 0
      td
        padding 2px 5px
        text-align center
    p
      margin-bottom 8px
      .title
        margin-right 5px
        font-weight bold
        position relative
  .open .title, .closed .title
    margin-right 2px
    &:after
      margin-left 5px
      width 16px
      height 18px
      content ""
      vertical-align top
      background url(../../public/icons/unlock-small.png) no-repeat center
      display inline-block
  .closed .title
    &:after
      background url(../../public/icons/lock-small.png) no-repeat center
  .previous
    text-decoration line-through
  .channelList
    margin 13px 0 8px
    &:after
      content ""
      display block
      clear both
      visibility hidden
      line-height 0
      height 0
    h3
      margin-bottom 3px
    img
      margin 0 3px 3px 0
      border-radius 3px
      display inline-block
      cursor pointer
      &.selected
        box-shadow 0 0 0 1px #83AC35, 0 0 0 2px #8DBA39
    .showAll
      padding-top 3px
      line-height 19px
      text-align center
      linear-bg-gradient(rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0.03))
      border-bottom 1px solid rgba(0, 0, 0, 0.03)
      box-shadow 0 1px rgba(0, 0, 0, 0.03) inset, 0 1px rgba(255,255,255,.55)
      clear left
      cursor pointer
      &:hover
        color default_highlight
        background default_highlight - rgba(0,0,0,0.89) + 50%
        
.adminAction
  width 218px
  padding 8px 1px 0
  margin-bottom 13px
  position relative
  overflow hidden
  &:after
    margin-top 0
    margin-left 2px
    left 19px
    bottom 5px
    width 9px
    height 9px
    content ""
    background #eee
    position absolute
    transform rotate(45deg)
    transition 500ms
    display none
  .arrow
    height 11px
    width 13px
    top -1px
    left 19px
    position absolute
    overflow hidden
    transition 500ms
    &:before
      left 1px
      top 5px
      width 9px
      height 9px
      content ""
      background #adadad
      border 1px solid #909090
      box-shadow 0 0 0 2px #eee
      position absolute
      transform rotate(45deg)
  &.second .arrow,
  &.second:after
    left 75px
  &.third .arrow
  &.third:after
    left 131px
  &.fourth .arrow
  &.fourth:after
    left 187px
  .box 
    padding 1px
    background rgba(0,0,0,.08)
    border 1px solid rgba(0,0,0,.34)
    border-radius 3px
    box-shadow 0 1px 3px rgba(0, 0, 0, 0.34) inset, 0 1px white
    overflow hidden
  .channelInfo
    padding 5px 8px
    margin-bottom 1px
    linear-bg-gradient #fafafa, #f7f7f7
    box-shadow 0 1px 1px rgba(0, 0, 0, 0.34)
  .action
    padding 5px 8px
    margin-bottom 1px
    background #f7f7f7
    box-shadow 0 1px 1px rgba(0, 0, 0, 0.34)
    display none
  .currentRole
    font-size 11px
    line-height 15px
  &.follower
    .moderator, .followerPlus
      display none
  &.moderator
    .follower, .followerPlus
      display none
  .info
    margin 5px 0
    li
      padding-left 18px
      line-height 21px
      background url(../../public/icons/plus.png) no-repeat 2px center
      &.negative
        background url(../../public/icons/minus.png) no-repeat 2px center
  .actionRow
    width 100%
    box horizontal justify center
    &.confirm
      display none
    > div
      padding 5px
      margin-right 2px
      text-align center
      linear-bg-gradient #f7f7f7, #e5e5e5
      box-shadow 0 1px 1px white inset, 0 1px 1px rgba(0, 0, 0, 0.34)
      box-flex 1
      cursor pointer
      transition background-image 300ms
      &:first-child
        border-bottom-left-radius 2px
      &:last-child
        margin-right 0
        border-bottom-right-radius 2px
      &:hover
        linear-bg-gradient #f7f7f7, #eee
      &:active
        padding 6px 5px 4px
        linear-bg-gradient #f7f7f7, #ccc
        box-shadow 0 2px white inset, 0 1px rgba(0, 0, 0, 0.05)
  &.choosen
    .actionRow
      display none
      &.confirm
        box horizontal justify center
    &.role
      .changeRole
        display block
    &.ban
      .banUser
        display block
        
.count
  font-size 14px
  line-height 27px
  color default_highlight
  &:before
    content "("
  &:after
    content ")"
    
.overlay
  width 100%
  height 100%
  radial-bg-gradient cover, rgba(0,0,0,.55), rgba(0,0,0,.89)
  position fixed
  z-index 10
  transition opacity 500ms
  &.visible
    opacity 1
  .modal
    padding 21px
    top 50%
    left 50%
    margin -134px 0 0 -138px
    text-shadow 0 1px rgba(255,255,255,.89)
    linear-bg-gradient #f7f7f7, #eee
    border-radius 5px
    box-shadow 0 0 0 1px rgba(0, 0, 0, 0.21), 0 1px 8px rgba(0, 0, 0, 0.55), 0 1px white inset
    position absolute
    .close
      height 24px
      width 55px
      margin -21px -21px 8px 0
      line-height 24px
      text-align center
      color rgba(0, 0, 0, 0.34)
      border-bottom 1px solid white
      border-left 1px solid white
      border-radius 0 5px 0 5px
      box-shadow 0 0 2px rgba(0,0,0,.13) inset
      float right
      cursor pointer
      &:hover
        color rgba(0,0,0,.55)
        text-shadow 0 1px rgba(255, 255, 255, 0.13)
        background rgba(0,0,0,.13)
      + form
        clear right